import{_ as l,c as r,a as s,b as a,t as p,d as n,e as t,o as i,r as c}from"./app.2b17415c.js";const O=JSON.parse('{"title":"More Ways to Install Metrist Orchestrator","description":"","frontmatter":{"title":"More Ways to Install Metrist Orchestrator"},"headers":[{"level":2,"title":"Installation Options","slug":"installation-options","link":"#installation-options","children":[]},{"level":2,"title":"Getting Ready","slug":"getting-ready","link":"#getting-ready","children":[{"level":3,"title":"Verification of Binaries","slug":"verification-of-binaries","link":"#verification-of-binaries","children":[]},{"level":3,"title":"API Token","slug":"api-token","link":"#api-token","children":[]}]},{"level":2,"title":"Docker Installation","slug":"docker-installation","link":"#docker-installation","children":[]},{"level":2,"title":"Debian Package Installation","slug":"debian-package-installation","link":"#debian-package-installation","children":[{"level":3,"title":"Unsupported Platforms with Debian Package Format","slug":"unsupported-platforms-with-debian-package-format","link":"#unsupported-platforms-with-debian-package-format","children":[]}]},{"level":2,"title":"Amazon Linux Package Installation","slug":"amazon-linux-package-installation","link":"#amazon-linux-package-installation","children":[]},{"level":2,"title":"Installation From Source","slug":"installation-from-source","link":"#installation-from-source","children":[]}],"relativePath":"guides/orchestrator-installation-alternatives.md","lastUpdated":1669410141000}'),d={name:"guides/orchestrator-installation-alternatives.md"},u={id:"frontmatter-title",tabindex:"-1"},h=s("a",{class:"header-anchor",href:"#frontmatter-title","aria-hidden":"true"},"#",-1),y=t(`<h2 id="installation-options" tabindex="-1">Installation Options <a class="header-anchor" href="#installation-options" aria-hidden="true">#</a></h2><p>We support the systems outlined below (unless otherwise marked \u201Cexperimental\u201D).</p><p>If your preferred system is not yet supported, please <a href="mailto:support@metrist.io?subject=Please%20support%20my%20preferred%20OS" target="_blank" rel="noreferrer">contact us</a>.</p><h2 id="getting-ready" tabindex="-1">Getting Ready <a class="header-anchor" href="#getting-ready" aria-hidden="true">#</a></h2><h3 id="verification-of-binaries" tabindex="-1">Verification of Binaries <a class="header-anchor" href="#verification-of-binaries" aria-hidden="true">#</a></h3><p>All binaries are signed by a key that is listed in our <a href="https://raw.githubusercontent.com/Metrist-Software/orchestrator/main/dist/trustedkeys.gpg" target="_blank" rel="noreferrer">public keyring</a>. Our installation instructions always include verify commands, such as:</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki"><code><span class="line"><span style="color:#A6ACCD;">gpg --verify --keyring=/tmp/metrist.gpg $orch_latest.asc</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;"># where %orch_lastest.asc is the path to one of our binaries</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><p>Example:</p><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki"><code><span class="line"><span style="color:#A6ACCD;">wget -nc https://raw.githubusercontent.com/Metrist-Software/orchestrator/main/dist/trustedkeys.gpg -O /tmp/metrist.gpg</span></span>
<span class="line"><span style="color:#A6ACCD;">orch_latest=</span><span style="color:#89DDFF;">$(</span><span style="color:#C3E88D;">curl https://dist.metrist.io/orchestrator/ubuntu/20.04.x86_64.latest.txt</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">wget https://dist.metrist.io/orchestrator/ubuntu/</span><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">orch_latest</span></span>
<span class="line"><span style="color:#A6ACCD;">wget https://dist.metrist.io/orchestrator/ubuntu/</span><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">orch_latest.asc</span></span>
<span class="line"><span style="color:#A6ACCD;">gpg --verify --keyring=/tmp/metrist.gpg </span><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">orch_latest.asc</span></span>
<span class="line"></span></code></pre></div><details class="details custom-block"><summary>On warning: \u201Cgpg: Can&#39;t check signature: No public key\u201D</summary><p>Note the message: <code>gpg: Signature made Day ## Month yyyy hh:mm:ss</code>. This indicates the binary\u2019s signature is valid.</p><p>You will also see: <code>gpg: Can&#39;t check signature: No public key</code>. This is to be expected and indicates that you have not, with your own private key, declared trust in our keyring. Contact us for more information.</p><p><a href="/guides/how-we-sign-code.html">Read about how we sign code</a> for more information.</p></details><h3 id="api-token" tabindex="-1">API Token <a class="header-anchor" href="#api-token" aria-hidden="true">#</a></h3><p>You will need your API auth token to run Metrist Orchestrator. You can find your API token at <a href="https://app.metrist.io/profile" target="_blank" rel="noreferrer">app.metrist.io/profile</a>. The scripts below expect to find it in the environment:</p><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki"><code><span class="line"><span style="color:#C792EA;">export</span><span style="color:#A6ACCD;"> METRIST_API_TOKEN=</span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">your API auth token here</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;">#confirm it is available in the environment</span></span>
<span class="line"><span style="color:#82AAFF;">echo</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">METRIST_API_TOKEN</span></span>
<span class="line"></span></code></pre></div><h2 id="docker-installation" tabindex="-1">Docker Installation <a class="header-anchor" href="#docker-installation" aria-hidden="true">#</a></h2><p>We distribute a Docker image for Orchestrator. You can get the image name from our distribution site:</p><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki"><code><span class="line"><span style="color:#A6ACCD;">latest=</span><span style="color:#89DDFF;">$(</span><span style="color:#C3E88D;">curl https://dist.metrist.io/orchestrator/docker/orchestrator-latest.txt</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">docker run </span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">run-args...</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">latest</span></span>
<span class="line"></span></code></pre></div><p><code>run-args</code> depends on what you want to do with Orchestrator. In the simplest case, for running private synthetic monitoring, you just need to add an API token using <code>-e METRIST_API_TOKEN=&lt;your key&gt;</code>. If you want to export Orchestrator\u2019s listening port for in-process monitoring, you should add <code>-p 51712:51712/udp</code>.</p><p>Example with both arguments:</p><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki"><code><span class="line"><span style="color:#A6ACCD;">docker run -e METRIST_API_TOKEN=</span><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">METRIST_API_TOKEN -p 51712:51712/udp </span><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">latest</span></span>
<span class="line"></span></code></pre></div>`,19),g={class:"details custom-block"},m=s("p",null,[a("Metrist Orchestrator cannot be run in a Linux WSL virtual machine without modification. (See "),s("a",{href:"https://devblogs.microsoft.com/commandline/systemd-support-is-now-available-in-wsl/",target:"_blank",rel:"noreferrer"},"this post"),a(" about making "),s("em",null,"systemd"),a(" available in WSL.)")],-1),C=s("p",null,"In theory, Metrist Orchestrator can be installed and run in a Docker container in a WSL virtual machine.",-1),A=s("p",null,[a("We don\u2019t support these options. However, please "),s("a",{href:"mailto:support@metrist.io",target:"_blank",rel:"noreferrer"},"contact us"),a(" if you experiment and have success with either of these approaches in a Windows environment.")],-1),D=t(`<h2 id="debian-package-installation" tabindex="-1">Debian Package Installation <a class="header-anchor" href="#debian-package-installation" aria-hidden="true">#</a></h2><div class="tip custom-block"><p class="custom-block-title">SYSTEMS SUPPORTED</p><ul><li>Ubuntu for x86, 64 bit: 20.04, 22.04</li></ul></div><p>If you are on a supported system for Debian package installation, you can:</p><ol><li><p>Download the package:</p><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki"><code><span class="line"><span style="color:#676E95;"># ensure you have these dependencies first</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">sudo apt install -y wget gpg curl</span></span>
<span class="line"></span></code></pre></div><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki"><code><span class="line"><span style="color:#A6ACCD;">orch_latest=</span><span style="color:#89DDFF;">$(</span><span style="color:#C3E88D;">curl https://dist.metrist.io/orchestrator/ubuntu/22.04.x86_64.latest.txt</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">wget https://dist.metrist.io/orchestrator/ubuntu/</span><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">orch_latest</span></span>
<span class="line"><span style="color:#A6ACCD;">wget https://dist.metrist.io/orchestrator/ubuntu/</span><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">orch_latest.asc</span></span>
<span class="line"><span style="color:#A6ACCD;">gpg --verify --keyring=/tmp/metrist.gpg </span><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">orch_latest.asc</span></span>
<span class="line"></span></code></pre></div><div class="info custom-block"><p class="custom-block-title">INFO</p><p>(Where &quot;22.04&quot; is replaced by the distribution you are using.)</p></div></li><li><p>Then install the package:</p><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki"><code><span class="line"><span style="color:#A6ACCD;">sudo apt install -y ./</span><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">orch_latest</span></span>
<span class="line"></span></code></pre></div></li><li><p>And add your API key:</p><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki"><code><span class="line"><span style="color:#A6ACCD;">cat </span><span style="color:#89DDFF;">&lt;&lt;</span><span style="color:#89DDFF;">EOF</span><span style="color:#C3E88D;"> | sudo tee -a /etc/default/metrist-orchestrator</span></span>
<span class="line"><span style="color:#C3E88D;">METRIST_API_TOKEN=</span><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">METRIST_API_TOKEN</span></span>
<span class="line"><span style="color:#89DDFF;">EOF</span></span>
<span class="line"></span></code></pre></div></li><li><p>You can then start the software using systemd:</p><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki"><code><span class="line"><span style="color:#A6ACCD;">sudo systemctl </span><span style="color:#82AAFF;">enable</span><span style="color:#A6ACCD;"> --now metrist-orchestrator</span></span>
<span class="line"><span style="color:#A6ACCD;">sudo systemctl start metrist-orchestrator</span></span>
<span class="line"></span></code></pre></div><div class="tip custom-block"><p class="custom-block-title">TIP</p><p><code>journalctl --unit metrist-orchestrator</code> should show a running process.</p><p><code>sudo systemctl stop metrist-orchestrator</code> will stop the process.</p><p><code>sudo systemctl start metrist-orchestrator</code> will start the process.</p></div></li></ol>`,4),b={id:"unsupported-platforms-with-debian-package-format",tabindex:"-1"},_=s("a",{class:"header-anchor",href:"#unsupported-platforms-with-debian-package-format","aria-hidden":"true"},"#",-1),f=t(`<p>Note the above Debian package <em>should</em> work for Ubuntu/Debian-like platforms that have the same C libraries as the supported Ubuntu versions (like actual Debian distributions and non-LTS Ubuntu versions)(but not Raspbian or other debian distributions for ARM64 systems). Please <a href="mailto:support@metrist.io" target="_blank" rel="noreferrer">contact us</a> if you want your system added to the list.</p><h2 id="amazon-linux-package-installation" tabindex="-1">Amazon Linux Package Installation <a class="header-anchor" href="#amazon-linux-package-installation" aria-hidden="true">#</a></h2><div class="tip custom-block"><p class="custom-block-title">SYSTEMS SUPPORTED</p><ul><li>Amazon Linux 2</li></ul></div><ol><li><p>Download the package:</p><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki"><code><span class="line"><span style="color:#A6ACCD;">sudo yum install wget curl</span></span>
<span class="line"><span style="color:#A6ACCD;">orch_latest=</span><span style="color:#89DDFF;">$(</span><span style="color:#C3E88D;">curl https://dist.metrist.io/orchestrator/amazon-linux/2.x86_64.latest.txt</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">wget https://dist.metrist.io/orchestrator/amazon-linux/</span><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">orch_latest</span></span>
<span class="line"></span></code></pre></div></li><li><p>(Optional) Verify the Package</p><p>Amazon Linux 2 includes a gpg version &lt; 2.1 so verification must be done outside the Amazon Linux 2 machine using a gpg version &gt;= 2.1 to support the Keybox keyring format of our trustedkeys.gpg.</p><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki"><code><span class="line"><span style="color:#A6ACCD;">orch_latest=</span><span style="color:#89DDFF;">$(</span><span style="color:#C3E88D;">curl https://dist.metrist.io/orchestrator/amazon-linux/2.x86_64.latest.txt</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">wget https://dist.metrist.io/orchestrator/amazon-linux/</span><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">orch_latest</span></span>
<span class="line"><span style="color:#A6ACCD;">wget https://dist.metrist.io/orchestrator/amazon-linux/</span><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">orch_latest.asc</span></span>
<span class="line"><span style="color:#A6ACCD;">gpg --verify --keyring=/tmp/metrist.gpg </span><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">orch_latest.asc</span></span>
<span class="line"></span></code></pre></div></li><li><p>Then install the package:</p><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki"><code><span class="line"><span style="color:#A6ACCD;">sudo yum localinstall ./</span><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">orch_latest</span></span>
<span class="line"></span></code></pre></div></li><li><p>And add your API key:</p><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki"><code><span class="line"><span style="color:#A6ACCD;">cat </span><span style="color:#89DDFF;">&lt;&lt;</span><span style="color:#89DDFF;">EOF</span><span style="color:#C3E88D;"> | sudo tee -a /etc/default/metrist-orchestrator</span></span>
<span class="line"><span style="color:#C3E88D;">METRIST_API_TOKEN=</span><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">METRIST_API_TOKEN</span></span>
<span class="line"><span style="color:#89DDFF;">EOF</span></span>
<span class="line"></span></code></pre></div></li><li><p>You can then start the software using systemd:</p><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki"><code><span class="line"><span style="color:#A6ACCD;">sudo systemctl </span><span style="color:#82AAFF;">enable</span><span style="color:#A6ACCD;"> --now metrist-orchestrator</span></span>
<span class="line"><span style="color:#A6ACCD;">sudo systemctl start metrist-orchestrator</span></span>
<span class="line"></span></code></pre></div><div class="tip custom-block"><p class="custom-block-title">TIP</p><p><code>journalctl --unit metrist-orchestrator</code> should show a running process.</p><p><code>sudo systemctl stop metrist-orchestrator</code> will stop the process.</p><p><code>sudo systemctl start metrist-orchestrator</code> will start the process.</p></div></li></ol>`,4),k={id:"installation-from-source",tabindex:"-1"},v=s("a",{class:"header-anchor",href:"#installation-from-source","aria-hidden":"true"},"#",-1),F=t(`<p>We recommend using <a href="https://asdf-vm.com/" target="_blank" rel="noreferrer">asdf-vm</a> to install dependencies, but it\u2019s not necessary.</p><details class="details custom-block"><summary>Without asdf</summary><p>If you do not or can not use asdf-vm, please check the <a href="https://github.com/Metrist-Software/orchestrator/blob/main/.tool-versions" target="_blank" rel="noreferrer">.tool-versions</a> file for dependencies. At a minimum, you will need current versions of Erlang and Elixir.</p></details><ol><li><p>Fetch the source code from Git, install dependencies (using <code>asdf</code> as below), and build:</p><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki"><code><span class="line"><span style="color:#A6ACCD;">git clone https://github.com/Metrist-Software/orchestrator.git</span></span>
<span class="line"></span></code></pre></div><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki"><code><span class="line"><span style="color:#82AAFF;">cd</span><span style="color:#A6ACCD;"> orchestrator</span></span>
<span class="line"><span style="color:#A6ACCD;">asdf install</span></span>
<span class="line"><span style="color:#C792EA;">export</span><span style="color:#A6ACCD;"> MIX_ENV=prod</span></span>
<span class="line"><span style="color:#A6ACCD;">mix </span><span style="color:#89DDFF;">do</span><span style="color:#A6ACCD;"> deps.get, compile, release</span></span>
<span class="line"></span></code></pre></div><p>This will create an executable <code>_build/prod/rel/bakeware/orchestrator</code> that you can then directly run.</p><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki"><code><span class="line"><span style="color:#A6ACCD;">_build/prod/rel/bakeware/orchestrator start</span></span>
<span class="line"></span></code></pre></div></li></ol>`,3);function w(o,T,x,I,E,S){const e=c("Badge");return i(),r("div",null,[s("h1",u,[a(p(o.$frontmatter.title)+" ",1),h]),y,s("details",g,[s("summary",null,[a("WSL (Windows Subsystem for Linux) "),n(e,{type:"warning",text:"experimental"})]),m,C,A]),D,s("h3",b,[a("Unsupported Platforms with Debian Package Format "),n(e,{type:"warning",text:"experimental"}),a(),_]),f,s("h2",k,[a("Installation From Source "),n(e,{type:"warning",text:"experimental"}),a(),v]),F])}const $=l(d,[["render",w]]);export{O as __pageData,$ as default};
