import{_ as e,c as t,a as s,b as n,t as o,e as l,o as i}from"./app.2b17415c.js";const A=JSON.parse('{"title":"Metrist Ruby In-Process Agent","description":"","frontmatter":{"title":"Metrist Ruby In-Process Agent"},"headers":[{"level":2,"title":"Usage","slug":"usage","link":"#usage","children":[]},{"level":2,"title":"Rails usage","slug":"rails-usage","link":"#rails-usage","children":[]},{"level":2,"title":"Installation","slug":"installation","link":"#installation","children":[]}],"relativePath":"tools/agent-ruby-in-process.md","lastUpdated":1669410141000}'),p={name:"tools/agent-ruby-in-process.md"},r={id:"frontmatter-title",tabindex:"-1"},c=s("a",{class:"header-anchor",href:"#frontmatter-title","aria-hidden":"true"},"#",-1),d=l(`<p>This Rails Plugin/Gem contains the Metrist In-Process Agent (IPA).</p><p>The goal of this agent is simple: all outgoing HTTP traffic gets intercepted and is sent off to the local Metrist Orchestrator, which sifts through the data and decides what to do with it.</p><p>It is kept very simple on purpose: it will time the call, and then send some elementary data to the host&#39;s agent per UDP. The overhead of this is in the order of microseconds, and an UDP <code>send()</code> will not block; this way, we can be sure that your application will not be impacted. All the heavy lifting is done in Orchestrator where it is fine if stuff gets delayed, dropped, or whatever.</p><h2 id="usage" tabindex="-1">Usage <a class="header-anchor" href="#usage" aria-hidden="true">#</a></h2><p>Just installing the Gem is enough. There is some optional configuration through the environment:</p><ul><li><code>METRIST_ORCHESTRATOR_HOST</code> sets a hostname/IP to which telemetry data is to be sent. The default is localhost.</li><li><code>METRIST_ORCHESTRATOR_PORT</code> sets a port through which telemetry data is to be sent. The default is port 51712.</li></ul><h2 id="rails-usage" tabindex="-1">Rails usage <a class="header-anchor" href="#rails-usage" aria-hidden="true">#</a></h2><p>When working with Rails, you probably already have most of your configuration in <code>config/application.rb</code>. If so, you can simply configure the Gem using:</p><div class="language-ruby"><button title="Copy Code" class="copy"></button><span class="lang">ruby</span><pre class="shiki"><code><span class="line"><span style="color:#FFCB6B;">MetristIpa</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">config </span><span style="color:#89DDFF;">do</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;"> c </span><span style="color:#89DDFF;">|</span></span>
<span class="line"><span style="color:#A6ACCD;">  c</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">host </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">cma.prod.test.com</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">  c</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">port </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">12345</span></span>
<span class="line"><span style="color:#89DDFF;">end</span></span>
<span class="line"></span></code></pre></div><h2 id="installation" tabindex="-1">Installation <a class="header-anchor" href="#installation" aria-hidden="true">#</a></h2><p>Add this line to your application&#39;s Gemfile:</p><div class="language-ruby"><button title="Copy Code" class="copy"></button><span class="lang">ruby</span><pre class="shiki"><code><span class="line"><span style="color:#A6ACCD;">gem </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">metrist_ipa</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"></span></code></pre></div><p>And then execute:</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki"><code><span class="line"><span style="color:#A6ACCD;">$ bundle</span></span>
<span class="line"></span></code></pre></div><p>Or install it yourself as:</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki"><code><span class="line"><span style="color:#A6ACCD;">$ gem install metrist_ipa</span></span>
<span class="line"></span></code></pre></div>`,16);function h(a,u,y,g,D,C){return i(),t("div",null,[s("h1",r,[n(o(a.$frontmatter.title)+" ",1),c]),d])}const b=e(p,[["render",h]]);export{A as __pageData,b as default};
